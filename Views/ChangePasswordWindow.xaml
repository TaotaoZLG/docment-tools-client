<Window x:Class="docment_tools_client.Views.ChangePasswordWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:mui="http://schemas.modernwpf.com/2019"
        xmlns:helpers="clr-namespace:docment_tools_client.Helpers"
        xmlns:vm="clr-namespace:docment_tools_client.ViewModels"
        mc:Ignorable="d"
        Title="&#x4fee;&#x6539;&#x5bc6;&#x7801;" Width="350" SizeToContent="Height"
        ResizeMode="NoResize" WindowStartupLocation="CenterOwner"
        Background="White"
        Icon="/Resources/Images/icon.png">

    <Window.DataContext>
        <vm:ChangePasswordViewModel />
    </Window.DataContext>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="&#x4fee;&#x6539;&#x5bc6;&#x7801;" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,20"/>

        <!-- Old Password -->
        <TextBlock Grid.Row="1" Text="&#x65e7;&#x5bc6;&#x7801;" Margin="0,0,0,5" Foreground="Gray"/>
        <PasswordBox Grid.Row="2" mui:ControlHelper.PlaceholderText="&#x8bf7;&#x8f93;&#x5165;&#x65e7;&#x5bc6;&#x7801;"
                     helpers:PasswordBoxHelper.Attach="True"
                     helpers:PasswordBoxHelper.Password="{Binding OldPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                     Margin="0,0,0,15"/>

        <!-- New Password -->
        <TextBlock Grid.Row="3" Text="&#x65b0;&#x5bc6;&#x7801;" Margin="0,0,0,5" Foreground="Gray"/>
        <PasswordBox Grid.Row="4" mui:ControlHelper.PlaceholderText="&#x8bf7;&#x8f93;&#x5165;&#x65b0;&#x5bc6;&#x7801;"
                     helpers:PasswordBoxHelper.Attach="True"
                     helpers:PasswordBoxHelper.Password="{Binding NewPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                     Margin="0,0,0,5"/>

        <!-- Password Rules -->
        <StackPanel Grid.Row="5" Margin="0,0,0,15">
            <TextBlock Text="&#x5bc6;&#x7801;&#x89c4;&#x5219;&#xff1a;" FontSize="12" Foreground="Gray" Margin="0,0,0,2"/>
            <TextBlock Text="1. &#x957f;&#x5ea6;&#x5fc5;&#x987b;&#x5728;6-20&#x4f4d;&#x4e4b;&#x95f4;" FontSize="11" Foreground="#999999"/>
            <TextBlock Text="2. &#x4e0d;&#x80fd;&#x5305;&#x542b;&#x975e;&#x6cd5;&#x5b57;&#x7b26;&#xff1a;&lt; &gt; &quot; ' \ |" FontSize="11" Foreground="#999999"/>
            <TextBlock Text="3. &#x65b0;&#x5bc6;&#x7801;&#x4e0d;&#x80fd;&#x4e0e;&#x65e7;&#x5bc6;&#x7801;&#x76f8;&#x540c;" FontSize="11" Foreground="#999999"/>
        </StackPanel>

        <!-- Confirm Password -->
        <TextBlock Grid.Row="6" Text="&#x786e;&#x8ba4;&#x65b0;&#x5bc6;&#x7801;" Margin="0,0,0,5" Foreground="Gray"/>
        <PasswordBox Grid.Row="7" mui:ControlHelper.PlaceholderText="&#x8bf7;&#x518d;&#x6b21;&#x8f93;&#x5165;&#x65b0;&#x5bc6;&#x7801;"
                     helpers:PasswordBoxHelper.Attach="True"
                     helpers:PasswordBoxHelper.Password="{Binding ConfirmPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                     Margin="0,0,0,5"/>

        <!-- Error Status -->
        <TextBlock Grid.Row="8" Margin="0,10,0,0" Text="{Binding StatusMessage}" Foreground="Red" TextWrapping="Wrap" HorizontalAlignment="Center"/>

        <!-- Buttons -->
        <StackPanel Grid.Row="9" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,20,0,0">
            <Button Content="&#x786e;&#x5b9a;" Command="{Binding ConfirmCommand}" IsEnabled="{Binding IsConfirmEnabled}" 
                    Background="#0078D7" Foreground="White" Width="100" Margin="0,0,15,0"/>
            <Button Content="&#x53d6;&#x6d88;" Command="{Binding CancelCommand}" Width="100"/>
        </StackPanel>
    </Grid>
</Window>
