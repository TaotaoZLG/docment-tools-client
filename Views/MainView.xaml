<Window x:Class="docment_tools_client.Views.MainView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:mui="http://schemas.modernwpf.com/2019"
        xmlns:helpers="clr-namespace:docment_tools_client.Helpers"
        xmlns:local="clr-namespace:docment_tools_client.Views"
        xmlns:vm="clr-namespace:docment_tools_client.ViewModels"
        mc:Ignorable="d"
        Title="律表通·法律文书处理工具 - 主页" Height="950" Width="1300"
        WindowStartupLocation="CenterScreen"
        Icon="/Resources/Images/icon.png"
        Background="{DynamicResource SystemControlPageBackgroundChromeLowBrush}"
        mui:ThemeManager.IsThemeAware="True">

    <Window.Resources>
        <!-- 基础圆角与阴影 -->
        <CornerRadius x:Key="ControlCornerRadius">4</CornerRadius>
        <CornerRadius x:Key="ContainerCornerRadius">8</CornerRadius>
        <DropShadowEffect x:Key="ContainerShadow" Color="Black" Opacity="0.05" BlurRadius="8" ShadowDepth="2"/>

        <!-- 按钮基础样式 -->
        <Style TargetType="Button" BasedOn="{StaticResource DefaultButtonStyle}">
            <Setter Property="mui:ControlHelper.CornerRadius" Value="{StaticResource ControlCornerRadius}"/>
            <Setter Property="Padding" Value="15,6"/>
            <Setter Property="Margin" Value="0,0,10,0"/>
        </Style>

        <!-- 列表项样式 -->
        <Style x:Key="LogListViewItemStyle" TargetType="ListViewItem">
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Style.Triggers>
                <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                    <Setter Property="Background" Value="#F0F2F5"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- 左侧菜单列表项样式（匹配原有UI风格） -->
        <Style x:Key="MenuListItemStyle" TargetType="ListBoxItem">
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Margin" Value="0,2,0,2"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#333333"/>
            <!-- 鼠标悬浮样式 -->
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E6F7FF"/>
                    <Setter Property="Foreground" Value="#0078D7"/>
                </Trigger>
                <!-- 选中样式 -->
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#0078D7"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <!-- 主布局Grid：重新规划行列 -->
    <Grid Margin="15">
        <!-- 列定义：左侧菜单列（固定200） + 右侧内容列（剩余空间） -->
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- 行定义：保持原有结构，仅调整命名更清晰 -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- 0：用户区 -->
            <RowDefinition Height="Auto"/>
            <!-- 1：系统公告 -->
            <RowDefinition Height="*"/>
            <!-- 2：核心内容区（菜单+页面） -->
            <RowDefinition Height="Auto"/>
            <!-- 3：底部版权 -->
        </Grid.RowDefinitions>

        <!-- ========== 原有模块1：用户区（跨2列） ========== -->
        <Border Grid.Row="0" Grid.ColumnSpan="2" Margin="0,0,0,15" CornerRadius="{StaticResource ContainerCornerRadius}" 
                Effect="{StaticResource ContainerShadow}">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#F0F8FF" Offset="0"/>
                    <GradientStop Color="#FFFFFF" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Grid Margin="20,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- 账号与额度 -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <mui:PersonPicture DisplayName="{Binding UserInfo.UserName}" Width="40" Margin="0,0,15,0"/>
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock Text="{Binding UserInfo.UserName}" FontSize="16" FontWeight="Bold" Margin="0,0,0,4"/>
                        <TextBlock Text="{Binding QuotaDisplay}" FontSize="13" FontWeight="SemiBold" Foreground="#0078D7"/>
                    </StackPanel>
                </StackPanel>

                <!-- 操作按钮组 -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <Button Content="在线充值" Command="{Binding RechargeCommand}" 
                            Background="#E6F7FF" Foreground="#0078D7" BorderBrush="#0078D7"
                            Margin="0,0,15,0"/>
                    <Button Content="同步额度" Command="{Binding SyncQuotaCommand}" 
                            Margin="0,0,15,0"/>
                    <Button Content="修改密码" Command="{Binding ChangePasswordCommand}" 
                            Margin="0,0,15,0"/>
                    <Button Content="退出登录" Command="{Binding LogoutCommand}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ========== 原有模块2：系统消息区（跨2列） ========== -->
        <Border Grid.Row="1" Grid.ColumnSpan="2" Margin="0,0,0,15" CornerRadius="{StaticResource ControlCornerRadius}" Padding="15,10">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
                    <GradientStop Color="#F8F9FA" Offset="0"/>
                    <GradientStop Color="#E6F7FF" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <DockPanel>
                <StackPanel DockPanel.Dock="Left" Orientation="Horizontal" VerticalAlignment="Center">
                    <mui:SymbolIcon Symbol="Message" Margin="0,0,10,0" Foreground="Gray"/>
                    <TextBlock Text="系统公告：" FontWeight="Bold" Foreground="Gray" VerticalAlignment="Center"/>
                </StackPanel>

                <!-- 横向滚动公告区 -->
                <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled" PanningMode="HorizontalOnly" VerticalAlignment="Center" Margin="10,0,0,0">
                    <ItemsControl ItemsSource="{Binding MessageList}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}" Margin="0,0,30,0" VerticalAlignment="Center"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </DockPanel>
        </Border>

        <!-- ========== 新增：左侧菜单（Row2 Column0） ========== -->
        <Border Grid.Row="2" Grid.Column="0" Margin="0,0,15,0" 
                CornerRadius="{StaticResource ContainerCornerRadius}"
                Effect="{StaticResource ContainerShadow}"
                Background="#F8F9FA">
            <Grid>
                <!-- 菜单标题 -->
                <TextBlock Text="功能菜单" FontSize="16" FontWeight="Bold" 
                           Foreground="#0078D7" Margin="15,10,0,0" VerticalAlignment="Top"/>
                <!-- 菜单列表 -->
                <ListBox x:Name="MenuListBox" 
                         SelectionChanged="MenuListBox_SelectionChanged"
                         ItemContainerStyle="{StaticResource MenuListItemStyle}"
                         Margin="10,40,10,10" Background="Transparent"
                         BorderThickness="0">
                    <!--带图标的菜单项（如果需要，可以取消注释并调整样式）-->
                    <!--<ListBoxItem Tag="DocumentGeneratePage">
                        <StackPanel Orientation="Horizontal">
                            <mui:SymbolIcon Symbol="Page" Margin="0,0,10,0"/>
                            <TextBlock Text="文书生成"/>
                        </StackPanel>
                    </ListBoxItem>
                    <ListBoxItem Tag="DocumentManagePage">
                        <StackPanel Orientation="Horizontal">
                            <mui:SymbolIcon Symbol="Folder" Margin="0,0,10,0"/>
                            <TextBlock Text="文书管理"/>
                        </StackPanel>
                    </ListBoxItem>-->
                    <ListBoxItem Tag="HomePage" Content="首页"/>
                    <ListBoxItem Tag="DocumentFilingPage" Content="文件归纳"/>
                    <ListBoxItem Tag="DocumentGenerateView" Content="文书生成"/>
                    <!--<ListBoxItem Tag="DocumentManagePage" Content="文书管理"/>-->
                    <ListBoxItem Tag="TemplateManagePage" Content="模板管理"/>
                    <ListBoxItem Tag="SystemSettingPage" Content="系统设置"/>
                </ListBox>
            </Grid>
        </Border>

        <!-- ========== 新增：右侧内容显示区（Row2 Column1） ========== -->
        <Border Grid.Row="2" Grid.Column="1" 
                CornerRadius="{StaticResource ContainerCornerRadius}"
                Effect="{StaticResource ContainerShadow}"
                Background="White">
            <Frame x:Name="MainContentFrame" 
                   NavigationUIVisibility="Hidden"
                   Margin="15"/>
        </Border>

        <!-- ========== 原有模块3：底部版权信息（跨2列） ========== -->
        <StackPanel Grid.Row="3" Grid.ColumnSpan="2" Margin="0,10,0,0" HorizontalAlignment="Center" VerticalAlignment="Bottom">
            <TextBlock Text="温馨提示：本工具为文书生成辅助软件，不构成法律意见，内容责任自负；严禁用于违法违规用途。" 
                       Foreground="#999999" FontSize="12" HorizontalAlignment="Center" Margin="0,0,0,4"/>
            <TextBlock Text="Copyright © 2025-2026 青岛新生代软件有限公司. All Rights Reserved." 
                       Foreground="#999999" FontSize="12" HorizontalAlignment="Center"/>
        </StackPanel>
    </Grid>
</Window>